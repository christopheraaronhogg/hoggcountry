---
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/Footer.astro';
import Header from '../components/Header.astro';
import YouTubeEmbed from '../components/YouTubeEmbed.astro';
import { SITE_DESCRIPTION, SITE_TITLE } from '../consts';
import { YT_FEED_URL } from '../lib/config';
import { fetchYouTubeRSS } from '../lib/youtube';

const videos = (await fetchYouTubeRSS(YT_FEED_URL)).slice(0, 3);
---
<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <body>
    <Header />
    <main>
      <section class="hero">
        <div class="container">
          <h1 class="font-display">üèûÔ∏è Hogg Country</h1>
          <p>Dad‚Äôs hikes across Arkansas, Colorado, and beyond ‚Äî trip logs, photos, maps, and trail stories.</p>
        </div>
      </section>

      {videos.length ? (
        <section>
          <div class="container">
            <div style="display:flex; align-items:baseline; justify-content:space-between; margin-bottom:.75rem;">
              <h2 class="font-display">Latest from YouTube</h2>
              <a href="/videos">See all</a>
            </div>
            <div style="display:grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1rem;">
              {videos.map((v) => (
                <article class="card">
                  <div class="video-frame">
                    <YouTubeEmbed id={v.id} title={v.title} />
                  </div>
                  <div style="padding:.75rem 1rem;">
                    <h3 class="video-title clamp-2">{v.title}</h3>
                  </div>
                </article>
              ))}
            </div>
          </div>
        </section>
      ) : null}
    </main>
    <Footer />
  </body>
</html>
